Perfect ✅
Here’s a **clean, practical, and interview-ready note** on **Episode 23 — `async` / `await`**, keeping it crisp, structured, and deeply clear 👇

---

# ⚙️ **Episode 23 — Async / Await in JavaScript**

---

## 🔹 1. What is `async`?

* `async` keyword is used **before a function** to make it **asynchronous**.
* An **async function always returns a Promise**, no matter what you return inside.

```js
async function getData() {
  return "Namaste JavaScript";
}

const dataPromise = getData();
console.log(dataPromise); // Promise {<fulfilled>: 'Namaste JavaScript'}

dataPromise.then((res) => console.log(res)); // Namaste JavaScript
```

✅ Even if you return a **normal value**, JS wraps it in a **resolved Promise**.

---

## 🔹 2. Async Function Returning a Promise

```js
const p = new Promise((resolve, reject) => {
  resolve("Promise resolved value!!");
});

async function getData() {
  return p;
}

getData().then((res) => console.log(res)); // Promise resolved value!!
```

💡 If an async function **already returns a Promise**, it’s returned as-is (not wrapped again).

---

## 🔹 3. What is `await`?

* `await` is used **inside async functions only**.
* It **pauses execution** of the function until the Promise resolves.

```js
const p = new Promise((resolve) => {
  resolve("Promise resolved value!!");
});

async function handlePromise() {
  const val = await p;
  console.log(val); // Promise resolved value!!
}

handlePromise();
```

📌 **Rule:** `await` can only be used inside an `async` function.

```js
await function () {}; // ❌ SyntaxError
```

---

## 🔹 4. Async vs `.then()` — The Core Difference

### 🧩 Promise `.then()` Way

```js
const p = new Promise((resolve) => {
  setTimeout(() => resolve("Promise resolved value!!"), 3000);
});

function getData() {
  p.then((res) => console.log(res));
  console.log("Hello There!");
}

getData();
// Output:
// Hello There!
// (after 3s) Promise resolved value!!
```

### ⚙️ Async/Await Way

```js
async function handlePromise() {
  const val = await p; // waits till resolved
  console.log("Hello There!");
  console.log(val);
}

handlePromise();
// Output after 3s:
// Hello There!
// Promise resolved value!!
```

💡 With `await`, JS **waits at that line** until the Promise resolves (but **without blocking** the main thread).

---

## 🔹 5. How Async/Await Works Behind the Scenes

* JS does **not actually block** the call stack.
* When `await` is encountered:

  * The function execution **suspends**.
  * Control returns to the **event loop**.
  * Once the Promise resolves → function resumes **from where it left off**.

```js
const p1 = new Promise((resolve) => setTimeout(() => resolve("p1 done"), 5000));
const p2 = new Promise((resolve) => setTimeout(() => resolve("p2 done"), 10000));

async function handlePromise() {
  console.log("Hi");
  const val1 = await p1;
  console.log(val1);

  const val2 = await p2;
  console.log(val2);
}

handlePromise();
```

🧠 Behavior:

* Function starts → logs “Hi”.
* Suspends at first `await`.
* Resumes after `p1` resolves (5s).
* Suspends again until `p2` resolves (10s).
* JS main thread **never blocks** — it just suspends this function temporarily.

---

## 🔹 6. Sequential vs Parallel Await

Sequential (waits one by one):

```js
const val1 = await p1;
const val2 = await p2;
```

Parallel (runs together):

```js
const [val1, val2] = await Promise.all([p1, p2]);
```

✅ `Promise.all` helps run multiple Promises concurrently.

---

## 🔹 7. Real-world Example — `fetch()` with Async/Await

```js
async function handlePromise() {
  const data = await fetch("https://api.github.com/users/alok722");
  const res = await data.json();
  console.log(res);
}
handlePromise();
```

Flow:

1. `fetch()` → returns a Promise.
2. `await fetch()` → waits for HTTP response.
3. `response.json()` → returns another Promise.
4. `await response.json()` → waits until JSON parsed.

---

## 🔹 8. Error Handling in Async/Await

### ✅ Using `try...catch` block

```js
async function handlePromise() {
  try {
    const data = await fetch("https://api.github.com/users/alok722");
    const res = await data.json();
    console.log(res);
  } catch (err) {
    console.log("❌ Error:", err);
  }
}
```

### ✅ Using `.catch()` (if you prefer chaining)

```js
handlePromise().catch((err) => console.log("❌ Error:", err));
```

---

## 🔹 9. Async/Await vs Promise `.then()` / `.catch()`

| Feature           | Promise `.then()` / `.catch()`  | Async / Await                   |
| ----------------- | ------------------------------- | ------------------------------- |
| Syntax            | Callback chaining               | Straight-line, cleaner          |
| Readability       | Nested or chained               | Synchronous-like                |
| Error Handling    | `.catch()`                      | `try...catch`                   |
| Behind the Scenes | Promise-based                   | Promise-based (syntactic sugar) |
| Recommended       | For simple or parallel Promises | For sequential async flow       |

💡 Both are **same internally**, but async/await improves **readability and flow control**.

---

## 🧭 Quick Summary

| Concept        | Description                             |
| -------------- | --------------------------------------- |
| `async`        | Makes a function return a Promise       |
| `await`        | Waits for a Promise to resolve          |
| Behavior       | Suspends async function, not call stack |
| Error Handling | Use `try...catch`                       |
| Advantage      | Cleaner async flow, no chaining         |
| Limitation     | Works only inside `async` functions     |

---

## 🎯 Interview Nuggets

1. **Q:** Does `async` function always return a Promise?
   **A:** Yes — even if you return a normal value.

2. **Q:** Does JS actually “wait” at `await`?
   **A:** No, it suspends the function execution and resumes later.

3. **Q:** How to run multiple Promises in parallel with async/await?
   **A:** Use `Promise.all([p1, p2])`.

4. **Q:** What happens if an `await`ed Promise rejects?
   **A:** The control jumps to the nearest `catch` block.

5. **Q:** Difference between `.then()` and `await`?
   **A:** `.then()` uses callbacks; `await` pauses code execution — more readable.

---

Would you like me to add a **visual flow diagram** (showing how `await` suspends the async function, event loop resumes it later) like your previous Promise flow diagrams?
